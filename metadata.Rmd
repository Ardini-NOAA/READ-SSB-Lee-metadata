---
title: "Metadata"
author: "Min-Yang Lee"
output:
  pdf_document:
    includes:
      in_header: preamble-latex.tex
    keep_tex: yes
    pandoc_args: --latex-engine=xelatex
  word_document: null
  html_document: null
date: '`r format(Sys.time(), "%B %d,  %Y")`'
---
<!--
Read the rest of this comment before doing anything. 
Make sure your system encoding is UTF-8.  In Rstudio -- File, Reopen with encoding.

This is just the parent metadata document.  
  This shouldn't have much written in it. Think of it as a giant table of contents.
  The majority of things are in the "child" sub-documents.  
  The Child references need to be unique.
  
This compiles to pdf (needs XeLaTeX in TexLive or MikTex).   
This compiles to html and docx.  docx is the ugliest.  HTML is reasonable.


-->


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, fig.align='center')
if(!require(ggplot2)) {  
  install.packages("ggplot2")
  require(ggplot2)}
if(!require(tidyr)) {  
  install.packages("tidyr")
  require(tidyr)}
if(!require(dplyr)) {  
  install.packages("dplyr")
  require(dplyr)}
if(!require(broom)) {  
  install.packages("broom")
  require(broom)}
if(!require(knitr)) {  
  install.packages("knitr")
  require(knitr)}
if(!require(gridExtra)) {  
  install.packages("gridExtra")
  require(gridExtra)}
if(!require(grid)) {  
  install.packages("grid")
  require(grid)}


#to get table captions and numbering
tn = local({
  i = 0
  function(x) {
    i <<- i + 1
    #paste('\n\n:Table ', i, ': ', x, sep = '')
    paste('\n\n:', x, sep = '')
    # The : before Table tells pandoc to wrap your caption in <caption></caption>
  }
})
knit_hooks$set(tab.cap = function(before, options, envir) {
  if(!before)
    tn(options$tab.cap)
})
default_output_hook = knit_hooks$get("output")
knit_hooks$set(output = function(x, options) {
  if (is.null(options$tab.cap) == F)  
    x
  else
    default_output_hook(x,options)
})


```

\tableofcontents

\onehalfspacing

\newpage
This has a purpose and a target audience. I'm not quite sure what that is yet. One of the audiences is "future me."

# General things

Many data tables are live, with nightly or continuous updates. For example, when working with the  dealer data, expect approximately 300 changes or additions to the current and previous year of data per day. Data is “complete” 6-9 months after the end of the calendar year; however, small changes are always occurring.

This has consequences for reproducibility if you do not store a copy of the data.

Make sure the table that you're using is not "stale."  Alot of the data is copied from GARFO to NEFSC servers. Sometimes, they stop getting copied. Sometimes they are updated monthly. One way to check this is to get the maximum DE, DC, or some other date field.

\newpage

# Dealer Databases
```{r child='dealer.Rmd'}
```
\newpage

# VESLOG Databases
**This is partially complete. Let's call it 8 out of 10. **

```{r child='veslog.Rmd'}
```

\newpage

# PERMIT Databases
**This is very incomplete. Let's call it 6 out of 10. **

```{r child='permit.Rmd'}
```

\newpage

# DMIS Databases  
**This is complete. 10 out of 10. **
The Data Matching and Imputation System is maintained by GARFO. Just email Michael Lanning at GARFO, he's very helpful. j.michael.lanning@noaa.gov 

\newpage

# MQRS Databases
**This is a placeholder. Let's call it 0 out of 10. **

```{r child='MQRS.Rmd'}
```

\newpage

```{r child='sector.Rmd'}
```
\newpage
# AMS, DAS, DAS2 Databases
**This is a placeholder. Let's call it 0 out of 10. **

```{r child='AMS_DAS.Rmd'}
```

# SFCLAM Databases
**This is a placeholder. Let's call it -1 out of 10. **

# OBDBS Databases
**This is a placeholder. Let's call it -3 out of 10. **

\newpage

